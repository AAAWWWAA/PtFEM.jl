<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Changes w.r.t. PtFEM · PtFEM</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/highlightjs/default.css" rel="stylesheet" type="text/css"/><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>PtFEM</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="INTRO.html">Introduction</a></li><li><a class="toctext" href="GETTINGSTARTED.html">Getting started</a></li><li class="current"><a class="toctext" href="CHANGES.html">Changes w.r.t. PtFEM</a><ul class="internal"><li><a class="toctext" href="#Julia&#39;s-convention-for-functions-that-update-arguments-1">Julia&#39;s convention for functions that update arguments</a></li><li><a class="toctext" href="#Custom-array-indices-1">Custom array indices</a></li><li><a class="toctext" href="#Replacing-skyline-storage-by-Julia-sparse-matrices-1">Replacing skyline storage by Julia sparse matrices</a></li><li><a class="toctext" href="#Separate-equivalent-loads-in-data-dictionary-1">Separate equivalent loads  in data dictionary</a></li><li><a class="toctext" href="#Graphics-1">Graphics</a></li><li><a class="toctext" href="#Initial-introduction-of-parallel-programming-in-Julia-1">Initial introduction of parallel programming in Julia</a></li><li><a class="toctext" href="#Integration-for-now-using-PtFEM&#39;s-approach-1">Integration - for now using PtFEM&#39;s approach</a></li><li><a class="toctext" href="#Gradient-descent-for-now-using-PtFEM&#39;s-approach-1">Gradient descent - for now using PtFEM&#39;s approach</a></li><li><a class="toctext" href="#Derivatives-for-now-using-PtFEM&#39;s-approach-1">Derivatives - for now using PtFEM&#39;s approach</a></li></ul></li><li><a class="toctext" href="index.html">PtFEM.jl documentation</a></li><li><a class="toctext" href="VERSIONS.html">Versions</a></li><li><a class="toctext" href="TODO.html">Todo</a></li><li><a class="toctext" href="REFERENCES.html">References</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="CHANGES.html">Changes w.r.t. PtFEM</a></li></ul><a class="edit-page" href="https://github.com/PtFEM/PtFEM.jl/tree/77d56065fcc0145525864ecaab03392c9d1159b1/docs/src/CHANGES.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Changes w.r.t. PtFEM</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Changes-with-respect-to-the-PtFEM-book-1" href="#Changes-with-respect-to-the-PtFEM-book-1">Changes with respect to the PtFEM book</a></h1><p>The PtFEM book is the primary source to understand how the Fortran toolkit can be used to build FEM programs. This is also the case for the Julia version of the PtFEM toolkit, PtFEM.jl.</p><p>But even with this restriction in place, there are many ways to port the PtFEM toolkit to Julia. Julia can in fact call the lower level Fortran &quot;building blocks&quot; (subroutines) directly. But that would make it harder to modify those functions. PtFEM.jl is entirely written in Julia end takes a middle of the road approach in replacing Fortran functionality by &quot;typical&quot; Julia features. These cases are documented in this file.</p><p>If additional Julia versions of functions, particularly &quot;building blocks&quot;, are required for use in the programs, these are added to the respective source files. Often times Julia&#39;s &quot;multiple dispatch&quot; takes care of selecting the correct version in the templates.</p><p>Several Fortran routines will (over time) be deprecated, e.g. see below the discussion on the skyline storage format. For now the original Julia translations are kept in the src/deprecated directory.</p><p>As more chapters will be added I will attempt to harmonize the input data dictionary</p><h2><a class="nav-anchor" id="Julia&#39;s-convention-for-functions-that-update-arguments-1" href="#Julia&#39;s-convention-for-functions-that-update-arguments-1">Julia&#39;s convention for functions that update arguments</a></h2><p>Note the use of the &quot;!&quot; in some function names which is the Julia convention for functions that update one or more of the function arguments. </p><h2><a class="nav-anchor" id="Custom-array-indices-1" href="#Custom-array-indices-1">Custom array indices</a></h2><p>Julia by default uses 1 as the first index into an array, but has the ability to use arbitrary indexing as well. The PtFEM Fortran programs use 0-based indexing for the loads vector. In programs p41 through to p44 in chapter 4 I have used OffsetArrays.jl for this purpose, i.e:</p><pre><code class="language-none">using OffsetArrays
N = 10
loads = OffsetArray(zeros(N+1), 0:N)</code></pre><p>I&#39;m planning to use the same approach in all other chapters.</p><h2><a class="nav-anchor" id="Replacing-skyline-storage-by-Julia-sparse-matrices-1" href="#Replacing-skyline-storage-by-Julia-sparse-matrices-1">Replacing skyline storage by Julia sparse matrices</a></h2><p>In the programs for chapter 4, the skyline storage idea has been replaced by Julia sparse matrices and, accordingly, PtFEM&#39;s pair sparin() and spabac() by Julia&#39;s cholfact() and &quot;\&quot; operator.</p><p>Thus</p><pre><code class="language-none">  PtFEM.sparin!(kv, kdiag)
  loads[2:end] = PtFEM.spabac!(kv, loads[2:end], kdiag)</code></pre><p>has been replaced by</p><pre><code class="language-none">  # Cholesky decomposed global stiffness matrix
  cfgsm = cholfact(gsm)
  loads[2:end] = cfgsm \ loads[2:end]</code></pre><p>All &#39;basic&#39; functions such as sparin!() and spabac!() can be found in the src/PtFEM directory.</p><h2><a class="nav-anchor" id="Separate-equivalent-loads-in-data-dictionary-1" href="#Separate-equivalent-loads-in-data-dictionary-1">Separate equivalent loads  in data dictionary</a></h2><p>E.g. p44. </p><p>In p44 corrections are applied if :eq_nodal_forces_and_moments is defined in the data dictionary.</p><p>See <a href="https://github.com/PtFEM/EEM.jl">PtFEM/EEM.jl</a> for further examples.</p><h2><a class="nav-anchor" id="Graphics-1" href="#Graphics-1">Graphics</a></h2><p>Graphics will be mostly implemented using the Julia pacckage Plots.jl (using the GR.jl backend).</p><h4><a class="nav-anchor" id="Plots.jl-1" href="#Plots.jl-1">Plots.jl</a></h4><p>E.g. Ex41.1.jl, Ex61.1.jl and Ex62.1.jl</p><p>Several programs will generate VTK output.</p><h4><a class="nav-anchor" id="VTK-(ParaView)-1" href="#VTK-(ParaView)-1">VTK (ParaView)</a></h4><p>E.g. Ex47.1.jl</p><h2><a class="nav-anchor" id="Initial-introduction-of-parallel-programming-in-Julia-1" href="#Initial-introduction-of-parallel-programming-in-Julia-1">Initial introduction of parallel programming in Julia</a></h2><p>Some examples will show simple ways of using Julia&#39;s capabilities in this area.</p><p>In Chapter 6, example Exp62.1a.jl calls p62a.jl which uses Julia pmap() for this purpose. This is too small a problem to really show performance improvements, but it shows an easy approach.</p><p><strong>Detail:</strong> Example Ex62.1a.jl could have called the p62(data) as Ex62.1.jl does; pp62(data) is identical but produces less output.</p><p><strong>Note:</strong>  have not done a profiling pass through p62.jl, it allocates way too much memory, so I expect significant performance improvements are possible.</p><h2><a class="nav-anchor" id="Integration-for-now-using-PtFEM&#39;s-approach-1" href="#Integration-for-now-using-PtFEM&#39;s-approach-1">Integration - for now using PtFEM&#39;s approach</a></h2><p>Currently I have not replaced numerical integration by e.g. Julia quadgk() for 1D integration of a function.</p><h2><a class="nav-anchor" id="Gradient-descent-for-now-using-PtFEM&#39;s-approach-1" href="#Gradient-descent-for-now-using-PtFEM&#39;s-approach-1">Gradient descent - for now using PtFEM&#39;s approach</a></h2><h2><a class="nav-anchor" id="Derivatives-for-now-using-PtFEM&#39;s-approach-1" href="#Derivatives-for-now-using-PtFEM&#39;s-approach-1">Derivatives - for now using PtFEM&#39;s approach</a></h2><footer><hr/><a class="previous" href="GETTINGSTARTED.html"><span class="direction">Previous</span><span class="title">Getting started</span></a><a class="next" href="index.html"><span class="direction">Next</span><span class="title">PtFEM.jl documentation</span></a></footer></article></body></html>
